<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>SAN ANDREAS STATE TROOPER</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #02060f; --card: #08101d; --border: #15243d; --accent: #1e88e5; }
        body { background: var(--bg); color: white; font-family: 'Inter', sans-serif; margin: 0; }
        
        /* Navigation avec Logo et Nom à gauche, Heure à droite */
        nav { 
            background: rgba(1, 3, 8, 0.95); padding: 15px 40px; display: flex; justify-content: space-between; align-items: center; 
            position: sticky; top: 0; z-index: 100; border-bottom: 1px solid var(--border); 
        }
        .nav-left { display: flex; align-items: center; gap: 15px; font-weight: 900; font-size: 0.85rem; letter-spacing: 1px; }
        .nav-right { display: flex; align-items: center; gap: 30px; }
        .nav-links a { color: white; text-decoration: none; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; margin-left: 20px; }
        #real-time { font-weight: 700; font-size: 0.85rem; color: #fff; border-left: 1px solid var(--border); padding-left: 20px; }

        /* Hero Section avec Titre complet et Devise */
        .hero { 
            height: 65vh; background: url('https://i.imgur.com/your-bg.png') center/cover; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; 
        }
        .hero h2 { font-size: 1.2rem; font-weight: 800; margin: 0; letter-spacing: 4px; text-transform: uppercase; color: #fff; }
        .hero h1 { font-size: 5rem; font-weight: 900; margin: -10px 0 10px 0; letter-spacing: -2px; text-transform: uppercase; }
        .hero p { letter-spacing: 10px; color: #5c6d8c; font-weight: 700; text-transform: uppercase; font-size: 0.9rem; }
        
        .content { max-width: 1150px; margin: 60px auto; padding: 0 20px; }
        
        /* Format News avec Calendrier sur la photo */
        .event-card { background: var(--card); border: 1px solid var(--border); margin-bottom: 40px; display: flex; align-items: stretch; min-height: 400px; border-radius: 4px; overflow: hidden; }
        .event-img-container { width: 40%; position: relative; border-right: 1px solid var(--border); }
        .event-img { width: 100%; height: 100%; background-size: cover; background-position: center; }
        
        /* Calendrier en bas à droite de l'image */
        .calendar-tag { 
            position: absolute; bottom: 20px; right: 20px; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px);
            padding: 10px 15px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.2); text-align: center;
        }
        .cal-day { font-size: 1.2rem; font-weight: 900; display: block; }
        .cal-month { font-size: 0.6rem; text-transform: uppercase; font-weight: 700; }

        .event-txt { width: 60%; padding: 50px; box-sizing: border-box; }
        .event-txt h2 { margin-top: 0; font-weight: 900; text-transform: uppercase; font-size: 1.6rem; margin-bottom: 20px; }
        .event-txt p { color: #bbb; line-height: 1.8; font-size: 1rem; white-space: pre-wrap; }

        footer { text-align: center; padding: 60px; border-top: 1px solid var(--border); color: #3d4f6e; font-size: 0.7rem; }
    </style>
</head>
<body>
    <nav>
        <div class="nav-left">
            <img id="nav-logo-img" src="" style="height:35px; display:none;">
            <span>SAN ANDREAS STATE TROOPER</span>
        </div>
        <div class="nav-right">
            <div class="nav-links" id="main-nav">
                <a href="index.html">Accueil</a>
                <a href="recrutement.html">Recrutement</a>
                <a href="admin.html" style="border: 1px solid rgba(255,255,255,0.3); padding: 8px 15px;">COMMAND STAFF</a>
            </div>
            <div id="real-time">00:00:00</div>
        </div>
    </nav>

    <div class="hero" id="heroBg">
        <h2>San Andreas</h2>
        <h1>STATE TROOPER</h1>
        <p>Protéger et servir</p>
    </div>

    <div class="content" id="newsSection">
        </div>

    <footer>
        Developed by <b>Carlos</b> for SAST New West Server
    </footer>

    <script>
        const firebaseConfig = { databaseURL: "https://sast-site-default-rtdb.europe-west1.firebasedatabase.app" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Heure en temps réel (Blanc, en haut à droite)
        function updateTime() {
            const now = new Date();
            document.getElementById('real-time').textContent = now.toLocaleTimeString('fr-FR');
        }
        setInterval(updateTime, 1000);
        updateTime();

        // Affichage des News avec Calendrier
        db.ref('events').on('value', snap => {
            const container = document.getElementById('newsSection'); container.innerHTML = "";
            snap.forEach(c => {
                const d = c.val();
                const eventDate = new Date(); // Par défaut aujourd'hui si non spécifié
                const day = eventDate.getDate();
                const month = eventDate.toLocaleString('fr-FR', { month: 'short' });

                container.innerHTML += `
                    <div class="event-card">
                        <div class="event-img-container">
                            <div class="event-img" style="background-image: url('${d.img || ''}')"></div>
                            <div class="calendar-tag">
                                <span class="cal-day">${day}</span>
                                <span class="cal-month">${month}</span>
                            </div>
                        </div>
                        <div class="event-txt">
                            <h2>${d.titre}</h2>
                            <p>${d.desc}</p>
                        </div>
                    </div>`;
            });
        });

        // Navigation dynamique
        db.ref('pages').on('value', snap => {
            const nav = document.getElementById('main-nav');
            snap.forEach(c => {
                const link = document.createElement('a');
                link.href = `page.html?id=${c.key}`;
                link.textContent = c.val().title;
                nav.insertBefore(link, nav.lastElementChild);
            });
        });

        // Design (Logo et Background)
        db.ref('design').on('value', s => {
            const d = s.val();
            if(d.bgHome) document.getElementById('heroBg').style.backgroundImage = `url(${d.bgHome})`;
            if(d.logo) {
                document.getElementById('nav-logo-img').src = d.logo;
                document.getElementById('nav-logo-img').style.display = 'block';
            }
        });
    </script>
</body>
</html>